<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Test - list</title>
	<link rel="stylesheet" href="list.css" />
</head>

<body>

<h1>Page title</h1>

<ul id="content" class="content">
	<div class="page">
		<li>
			<h3 data-id="1234">Some title</h3>
			<p>Some text</p>
		</li>
		<li>
			<h3 data-id="2345">Some title</h3>
			<p>Some text</p>
		</li>
		<li>
			<h3 data-id="3456">Some title</h3>
			<p>Some text</p>
		</li>
		<li>
			<h3 data-id="4567">Some title</h3>
			<p>Some text</p>
		</li>
		<li>
			<h3 data-id="5678">Some title</h3>
			<p>Some text</p>
		</li>
	</div>
</ul>

<script>
rudieLastReadConfig = {
	storeURL: localStorage.rudieReadLastTestStoreURL,
	store: localStorage.rudieReadLastTestStore,

	listSelector: 'ul.content',
	itemSelector: 'ul.content li',
	idItemSelector: 'ul.content li h3',
	idAttribute: 'data-id',
	subtree: false,

	menuPocket: {
		html: '<div class="rudie-read-it-menu-pocket"></div>',
	},

	trackers: [
		{
			name: 'list.seen',
			className: 'seen',
			appendTo: '.rudie-read-it-menu-pocket',
			html: '<button class="rudie-read-it-menu-item seen">..</button>',
			redundancy: 6,
			all: {
				appendTo: 'h1',
				html: '<button class="rudie-read-it-all-menu-item">Mark ALL ..</button>',
			},
		},
		{
			name: 'list.ignore',
			className: 'ignored',
			appendTo: '.rudie-read-it-menu-pocket',
			html: '<button class="rudie-read-it-menu-item ignore">X</button>',
			redundancy: 0,
		},
	],

	on: {
		menu: function(cfg, data) {
			console.log(data.menuItem);
		},
		menus: function(cfg, data) {
			console.log(data.menuPocket);
		},
	}
};
</script>
<script src="../rudie-read-last.js"></script>

<ul id="more-storage" style="display: none">
	<div class="page">
		<li>
			<h3 data-id="6789">Some title</h3>
			<p>Some text</p>
		</li>
		<li>
			<h3 data-id="7890">Some title</h3>
			<p>Some text</p>
		</li>
		<li>
			<h3 data-id="8901">Some title</h3>
			<p>Some text</p>
		</li>
		<li>
			<h3 data-id="9012">Some title</h3>
			<p>Some text</p>
		</li>
		<li>
			<h3 data-id="8282">New title</h3>
			<p>New text</p>
		</li>
	</div>
	<div class="page">
		<li>
			<h3 data-id="9823">New title</h3>
			<p>New text</p>
		</li>
		<li>
			<h3 data-id="7612">New title</h3>
			<p>New text</p>
		</li>
		<li>
			<h3 data-id="7563">New title</h3>
			<p>New text</p>
		</li>
		<li>
			<h3 data-id="7896">New title</h3>
			<p>New text</p>
		</li>
	</div>
</ul>

<p><button id="load-more">^ LOAD MORE ^</button></p>

<script>
document.querySelector('#load-more').onclick = function(e) {
	var $page = document.querySelector('#more-storage .page');
	document.querySelector('#content').appendChild($page);

	if ( !document.querySelector('#more-storage .page') ) {
		this.remove();
	}
};
</script>

</body>

</html>
